---
import { NAVIGATION } from "@config/site";
import { Package, UserIcon } from "lucide-react";
import MobileMenu from "@components/react/MobileMenu";

const { currentPathname } = Astro.props;
const baseUrl = import.meta.env.BASE_URL.replace(/\/$/, ""); // Remove trailing slash if exists

const isActiveLink = (href: string): boolean => {
  const normalizedHref = href.startsWith("/") ? `${baseUrl}${href}` : href;
  const normalizedPath = currentPathname.replace(/\/$/, "");
  const normalizedTarget = normalizedHref.replace(/\/$/, "");
  return normalizedTarget === normalizedPath;
};
---

<header
  class="sticky top-0 z-50 w-full border-b border-slate-200 bg-white/95 backdrop-blur-md shadow-sm"
>
  <nav
    class="container mx-auto flex h-20 items-center justify-between px-4 sm:px-6 lg:px-8"
  >
    <!-- Logo -->
    <div class="flex items-center">
      <a href={`${baseUrl}/`} class="flex items-center space-x-3 group">
        <img
          src={`${baseUrl}/favicon-lcm.png`}
          alt="Lantar Cipta Media Logo"
          class="h-10 w-10 transition-transform group-hover:scale-110"
        />
        <!-- <span
          class="text-2xl font-bold text-[#A9CE3C]"
        >
          Lantar Cipta Media
        </span> -->
      </a>
    </div>

    <!-- Desktop Navigation -->
    <div class="hidden lg:flex lg:items-center lg:space-x-1">
      {
        NAVIGATION.map((item) => {
          const isActive = isActiveLink(item.href);
          const fullHref = item.href.startsWith("/")
            ? `${baseUrl}${item.href}`
            : item.href;
          return (
            <a
              href={fullHref}
              class={`px-4 py-2 text-sm font-medium text-slate-700 hover:text-black hover:bg-[#A9CE3C]/50 rounded-lg transition-all relative group ${isActive ? "nav-active" : ""}`}
            >
              {item.name}
            </a>
          );
        })
      }
    </div>

    <!-- CTA Button -->
    <div class="hidden lg:flex lg:items-center lg:space-x-4">
      <a
        href={`${baseUrl}/login`}
        class="inline-flex items-center px-6 py-2.5 text-sm font-semibold text-white
           bg-linear-to-r from-[#A9CE3C] to-[#8FAF33]
           hover:from-[#96B835] hover:to-[#7E9E2E]
           rounded-lg shadow-md shadow-[#A9CE3C]/40
           hover:shadow-lg transition-all duration-300"
      >
        Login
      </a>
    </div>

    <!-- Mobile Menu Button -->
    <MobileMenu client:idle />
  </nav>
</header>
